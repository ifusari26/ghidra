package utilities;

import java.util.Arrays;
import java.util.Optional;
import java.util.stream.Collectors;

import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;

public final class Accessors {

	public static <T> Optional<T> createInstanceOf(final Class<T> type, Object... args) {
		try {
			Class<?>[] types = (Class<?>[]) Arrays.stream(args).map(Object::getClass).collect(Collectors.toList())
					.toArray();
			Constructor<T> constructor = type.getConstructor(types);
			return Optional.ofNullable(constructor.newInstance(args));
		} catch (InstantiationException | IllegalAccessException | IllegalArgumentException | InvocationTargetException
				| NoSuchMethodException | SecurityException e) {
			return Optional.empty();
		}
	}

}
